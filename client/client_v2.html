<html>
    <head>
        <title>Client v2</title>
    </head>
    <body>
        <button onclick="read_table_post()">
            Read
        </button>
        <div id="main">
        </div>
    </body>
</html>


<script>
    let HOST = "127.0.0.1";
    let PORT = 8000;
    let read_url = "http://" + HOST + ":" + PORT + "/api/v2/read/";
    var data = Object();
    data["nickname"] = "source";
    data = JSON.stringify(data);
    let mode = "OR";

    function read_table_get() {
        console.log("read_table_post()");

        let xhr = new XMLHttpRequest();
        url = read_url + "nugu";
        console.log(url);
        xhr.open("GET", url, true);
        
        xhr.onload = () => {
            if (xhr.status == 200) {
                document.getElementById("main").innerHTML = xhr.responseText;
            } else {
                console.log("Error", xhr.statusText);
            }
        };
    }

    function read_table_post() {
        console.log("read_table_post()")

        url = read_url + "nugu";
        var formData = new FormData();

        formData.append("data", data);
        formData.append("mode", mode);

        for (var pair of formData.entries()) {
            console.log(pair[0] + ', ' + pair[1]);
        }
        let xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);
        let time1 = new Date().getTime();
        xhr.send(formData, true);
        xhr.onload = () => {
            if (xhr.status == 200) {
                let time2 = new Date().getTime();
                let dt = time2 - time1
                console.log(dt);
                document.getElementById("main").innerHTML = xhr.responseText;
                document.getElementById("main").innerHTML += "<br>" + dt + "ms";
            } else {
                console.log("Error", xhr.statusText);
            }
        };


    }
</script>

